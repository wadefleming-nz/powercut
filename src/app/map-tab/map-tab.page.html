<ion-header>
  <ion-toolbar color="primary">
    <ion-title>
      Map
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div class="container" *ngIf="incidents$ | async as incidents">
    <div class="map-container">
      <agm-map
        [latitude]="latitude"
        [longitude]="longitude"
        [zoom]="zoom"
        [streetViewControl]="false"
        [clickableIcons]="false"
        [usePanning]="true"
        (centerChange)="centerChanged($event)"
        ><agm-marker
          *ngFor="let incident of incidents; trackBy: trackByIncidentId"
          [latitude]="incident.latitude"
          [longitude]="incident.longitude"
          (markerClick)="incidentClicked(incident)"
        >
        </agm-marker></agm-map
      ><ion-icon
        *ngIf="centerIndicatorVisible"
        name="add-outline"
        class="center-indicator map-center"
      ></ion-icon
      ><ion-fab vertical="top" horizontal="end" slot="fixed">
        <ion-fab-button color="secondary" (click)="addClicked()">
          <ion-icon name="add"></ion-icon>
        </ion-fab-button>
        <ion-fab-button
          color="danger"
          class="ion-margin-top"
          (click)="deleteClicked(incidents)"
        >
          <ion-icon name="trash-outline"></ion-icon>
        </ion-fab-button>
        <ion-fab-button
          *ngIf="geolocationAvailable"
          color="light"
          class="ion-margin-top"
          (click)="geolocationClicked()"
        >
          <ion-icon name="navigate-outline"></ion-icon>
        </ion-fab-button>
      </ion-fab>
    </div>
    <div class="incident-container">
      <ion-card>
        <ion-card-header>
          Header
        </ion-card-header>

        <ion-card-content>
          <form (ngSubmit)="submitIncident()">
            <ion-item>
              <ion-label stacked>Some Label</ion-label>
              <ion-input
                name="some-input"
                type="text"
                value="some-value"
              ></ion-input>
            </ion-item>
          </form>
        </ion-card-content>
      </ion-card>
    </div>
  </div>
</ion-content>
